# .github/workflows/release.yml

name: ğŸ·ï¸ Semantic Release (Versioning)

on:
  push:
    branches:
      - main

jobs:
  release:
    name: Create Semantic Release
    runs-on: ubuntu-latest
    permissions:
      contents: write # Git Tag, Release, íŒŒì¼ ì»¤ë°‹ì„ ìœ„í•´ write ê¶Œí•œ í•„ìš”
      # packages: write # GHCRê³¼ ê´€ë ¨ ì—†ìœ¼ë¯€ë¡œ ì œê±°í•´ë„ ë©ë‹ˆë‹¤.

    steps:
      - name: Checkout source code
        uses: actions/checkout@v3
        with:
          # Semantic Releaseê°€ ëª¨ë“  ì»¤ë°‹ì„ ë¶„ì„í•  ìˆ˜ ìˆë„ë¡ fetch-depthë¥¼ 0ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
          fetch-depth: 0

      - name: Setup Node.js and Yarn
        uses: actions/setup-node@v3
        with:
          node-version: "20"
          cache: "yarn"

      - name: Install dependencies
        run: yarn install --immutable

      # Semantic Release ì‹¤í–‰
      - name: Run Semantic Release
        uses: cycjimmy/semantic-release-action@v4
        env:
          # GitHub í† í°ì„ ì‚¬ìš©í•˜ì—¬ Release ë° Tagë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
