"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const ws_1 = require("ws");
// 8080 ν¬νΈμ—μ„ μ›Ήμ†μΌ“ μ„λ²„λ¥Ό μƒμ„±ν•©λ‹λ‹¤.
const wss = new ws_1.WebSocketServer({ port: 8080 });
console.log("β… μ„λ²„κ°€ 8080 ν¬νΈμ—μ„ μ‹μ‘λμ—μµλ‹λ‹¤.");
// 'connection' μ΄λ²¤νΈλ” ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°λ  λ•λ§λ‹¤ λ°μƒν•©λ‹λ‹¤.
wss.on("connection", (ws) => {
    console.log("π€ μƒλ΅μ΄ ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°λμ—μµλ‹λ‹¤.");
    // ν΄λΌμ΄μ–ΈνΈλ΅ ν™μ λ©”μ‹μ§€λ¥Ό λ³΄λƒ…λ‹λ‹¤.
    ws.send("π‰ μ„λ²„μ— μ¤μ‹  κ²ƒμ„ ν™μν•©λ‹λ‹¤!");
    // 'message' μ΄λ²¤νΈλ” ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ©”μ‹μ§€λ¥Ό μμ‹ ν•  λ• λ°μƒν•©λ‹λ‹¤.
    ws.on("message", (message) => {
        console.log(`μμ‹  λ©”μ‹μ§€: ${message}`);
        // λ°›μ€ λ©”μ‹μ§€λ¥Ό κ·Έλ€λ΅ ν΄λΌμ΄μ–ΈνΈμ—κ² λλλ ¤ λ³΄λƒ…λ‹λ‹¤ (μ—μ½”).
        ws.send(`μ„λ²„κ°€ λ°›μ€ λ©”μ‹μ§€: ${message}`);
    });
    // 'close' μ΄λ²¤νΈλ” ν΄λΌμ΄μ–ΈνΈ μ—°κ²°μ΄ λμ–΄μ΅μ„ λ• λ°μƒν•©λ‹λ‹¤.
    ws.on("close", () => {
        console.log("π” ν΄λΌμ΄μ–ΈνΈ μ—°κ²°μ΄ λμ–΄μ΅μµλ‹λ‹¤.");
    });
    // 'error' μ΄λ²¤νΈλ” μ—λ¬ λ°μƒ μ‹ μ‹¤ν–‰λ©λ‹λ‹¤.
    ws.on("error", (error) => {
        console.error("μ—λ¬ λ°μƒ:", error);
    });
});
